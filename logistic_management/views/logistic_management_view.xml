<?xml version="1.0"?>
<openerp>
    <data>         
         <!--stock.move-->
         <record model="ir.ui.view" id="view_stock_move_logistic_tree">
             <field name="name">stock.move.tree</field>
             <field name="model">stock.move</field>
             <field name="arch" type="xml">
                 <tree string="Stock move">
                     <field name="company_id" invisible="1" />
                     <field name="picking_id" />                     
                     <field name="origin" />
                     <field name="product_id" />
                     <field name="name" />
                     <field name="product_uom_qty" />
                     <field name="product_uom" />
                     <field name="date" />
                     <field name="date_expected" />
                     
                     <field name="location_id" />
                     <field name="location_dest_id" />
                     
                     <field name="logistic_load_id" />
                     <field name="logistic_unload_id" />
                     <field name="logistic_purchase_id" />
                     <field name="logistic_quant_id" />
                     <field name="state" invisible="1" />
                 </tree>
             </field>
         </record>
         <record model="ir.actions.act_window" id="action_stock_move_logistic_form">
             <field name="name">Stock move logistic</field>
             <field name="res_model">stock.move</field>
             <field name="view_type">form</field>
             <field name="view_mode">tree,form</field>
             <field name="view_id" ref="view_stock_move_logistic_tree"/>
             <field name="context">{}</field>
             <field name="domain">[]</field>
         </record>
         
         <!--purchase.order-->
         <record model="ir.ui.view" id="view_purchase_order_logistic_workflow_form">
             <field name="name">purchase.order.form</field>
             <field name="model">purchase.order</field>
             <field name="inherit_id" ref="purchase.purchase_order_form"/>
             <field name="arch" type="xml">
                 <field name="state" position="replace">
                     <field name="state" invisible="1"/>
                     <field name="logistic_state" widget="statusbar" statusbar_visible="draft,confirmed,done" />
                 </field>
                
                <!--HIDE WF BUTTON:--> 
                <button name="action_rfq_send" position="attributes">
                     <attribute name="invisible">1</attribute>
                 </button>
                <button name="action_rfq_send" position="attributes">
                     <attribute name="invisible">1</attribute>
                 </button>
                <button name="print_quotation" position="attributes">
                     <attribute name="invisible">1</attribute>
                 </button>
                <button name="print_quotation" position="attributes">
                     <attribute name="invisible">1</attribute>
                 </button>
                <button name="button_confirm" position="attributes">
                     <attribute name="invisible">1</attribute>
                 </button>
                <button name="button_confirm" position="attributes">
                     <attribute name="invisible">1</attribute>
                 </button>
                <button name="button_approve" position="attributes">
                     <attribute name="invisible">1</attribute>
                 </button>
                <button name="action_rfq_send" position="attributes">
                     <attribute name="invisible">1</attribute>
                 </button>
                <button name="action_view_picking" position="attributes">
                     <attribute name="invisible">1</attribute>
                 </button>
                <button name="button_draft" position="attributes">
                     <attribute name="invisible">1</attribute>
                 </button>
                <button name="button_cancel" position="attributes">
                     <attribute name="invisible">1</attribute>
                 </button>
                <button name="button_done" position="attributes">
                     <attribute name="invisible">1</attribute>
                 </button>
                <button name="button_unlock" position="attributes">
                     <attribute name="invisible">1</attribute>
                 </button>
    
                 <field name="state" position="before">                     
                      <button name="set_logistic_state_confirmed" string="Logistic confirmed" type="object" attrs="{'invisible': [('logistic_state','=','draft')]}"/>
                 </field>
             </field>
         </record>
         
         <!--res.company-->
         <record model="ir.ui.view" id="view_res_company_logistic_parameter_form">
             <field name="name">res.company.form</field>
             <field name="model">res.company</field>
             <field name="arch" type="xml">
                 <form string="Logistic parameter">  
                     <sheet>
                         <group col="4" colspan="4">
                             <field name="name" readonly="1" />
                             <notebook colspan="4">
                                 <page string="Logistic">
                                     <group col="4" colspan="4">
                                         <separator string="Logistic parameters:" colspan="4"/>
                                         <field name="logistic_location_id" widget="selection" domain="[('usage', '!=', 'view')]"/>                                         
                                         
                                         <field name="logistic_assign_mode" />
                                         <field name="logistic_order_sort" />
                                         
                                         <separator string="Load document:" colspan="4"/>
                                         <field name="logistic_pick_in_type_id" />
                                     </group>
                                 </page>
                             </notebook>
                         </group>
                     </sheet>        
                 </form>
             </field>
         </record>
         <record model="ir.actions.act_window" id="action_res_company_parameter">
             <field name="name">Logistic parameter</field>
             <field name="res_model">res.company</field>
             <field name="view_type">form</field>
             <field name="view_mode">tree,form</field>
             <!--<field name="view_id" ref="view_model_name_form"/>-->          
             <field name="context">{'form_view_ref': 'logistic_management.view_res_company_logistic_parameter_form'}</field>
             <field name="domain">[]</field>
         </record>
         
    
         <!--sale.order-->
         <record model="ir.ui.view" id="view_sale_order_logistic_form">
             <field name="name">sale.order.logistic.form</field>
             <field name="model">sale.order</field>
             <field name="inherit_id" ref="sale.view_order_form"/>
             <field name="arch" type="xml">
                 <field name="partner_id" position="after">
                     <field name="logistic_state" readonly="1"/>
                 </field>
             </field>
         </record>    
         <record model="ir.ui.view" id="view_sale_order_quotation_logistic_tree">
             <field name="name">sale.order.logistic.tree</field>
             <field name="model">sale.order</field>
             <field name="inherit_id" ref="sale.view_quotation_tree"/>
             <field name="arch" type="xml">
                 <field name="state" position="after">
                     <field name="logistic_state" />
                 </field>
                 <!--TODO hide state field-->
             </field>
         </record>    
         <record model="ir.ui.view" id="view_sale_order_logistic_tree">
             <field name="name">sale.order.logistic.tree</field>
             <field name="model">sale.order</field>
             <field name="inherit_id" ref="sale.view_order_tree"/>
             <field name="arch" type="xml">
                 <field name="state" position="after">
                     <field name="logistic_state" />
                 </field>
                 <!--TODO hide state field-->
             </field>
         </record>    

         <!--sale.order.line-->
         <record model="ir.ui.view" id="view_sale_order_line_logistic_tree">
             <field name="name">sale.order.line.logistic.tree</field>
             <field name="model">sale.order.line</field>
             <field name="priority" eval="40" />
             <field name="arch" type="xml">
                 <tree string="Sale line logistic" decoration-muted="is_kit==True" decoration-warning="kit_product_id != False">
                     <field name="is_kit" />
                     <field name="order_id" />
                     <field name="product_id" />
                     <field name="kit_product_id" />
                     <field name="origin_product_id" />
                     <field name="linked_mode" />
                     <field name="name" />
                     <field name="product_uom_qty" />
                     <field name="logistic_covered_qty" />
                     <field name="logistic_uncovered_qty" />
                     <field name="logistic_purchase_qty" />
                     <field name="logistic_received_qty" />
                     <field name="logistic_remain_qty" />
                     <field name="logistic_delivered_qty" />
                     <field name="logistic_undelivered_qty" />
                     <field name="logistic_state" />
                 </tree>
             </field>
         </record>
         <record model="ir.ui.view" id="view_sale_order_line_logistic_form">
             <field name="name">sale.order.line.logistic.form</field>
             <field name="model">sale.order.line</field>
             <field name="priority" eval="40" />
             <field name="arch" type="xml">
                 <form string="Sale line logistic">
                     <header>                           
                             <field name="logistic_state" widget="statusbar"  />                         
                     </header>
                     <sheet>
                         <group colspan="4" col="4">
                             <field name="order_id" />
                             <newline/>
                             <field name="product_id" />
                             <field name="name" />
                             
                             <field name="is_kit" />
                             <field name="kit_product_id" />

                             <field name="origin_product_id" />
                             <field name="linked_mode" />
                         </group>                         
                         <notebook colspan="4">
                             <page string="Quantity">
                                 <group colspan="4" col="4">
                                     <field name="product_uom_qty" />
                                     <newline/>
                                     <field name="logistic_covered_qty" />
                                     <field name="logistic_uncovered_qty" />
                                     
                                     <field name="logistic_purchase_qty" />
                                     <field name="logistic_received_qty" />
                                     
                                     <field name="logistic_remain_qty" />
                                     
                                     <field name="logistic_delivered_qty" />
                                     <field name="logistic_undelivered_qty" />                                     
                                 </group>    
                             </page>
                         
                             <page string="Assigned">
                                 <group colspan="4" col="4">
                                     <separator string="Assigned from stock:" colspan="4"/>
                                     <field name="assigned_line_ids" nolabel="1" colspan="4"/>
                                 </group>    
                             </page>
                             <page string="Purchase order">
                                 <group colspan="4" col="4">
                                     <separator string="Supplier purchased:" colspan="4"/>
                                     <field name="purchase_line_ids" nolabel="1" colspan="4" />
                                 </group>    
                             </page>
                             <page string="Load move">
                                 <group colspan="4" col="4">
                                     <separator string="Supplier loaded:" colspan="4"/>
                                     <field name="load_line_ids" nolabel="1" colspan="4" />
                                 </group>    
                             </page>
                             <page string="Delivered move">
                                 <group colspan="4" col="4">
                                     <separator string="Customer delivered:" colspan="4"/>
                                     <field name="delivered_line_ids" nolabel="1" colspan="4" />
                                 </group>    
                             </page>                             
                         </notebook>
                    </sheet>     
                 </form>
             </field>
         </record>
         <record model="ir.actions.act_window" id="action_sale_order_line_logistic">
             <field name="name">Sale line logistic</field>
             <field name="res_model">sale.order.line</field>
             <field name="view_type">form</field>
             <field name="view_mode">tree,form</field>
             <field name="view_id" ref="view_sale_order_line_logistic_tree"/>
             <field name="context">{'form_view_ref': 'logistic_management.view_sale_order_line_logistic_form'}</field>
             <field name="domain">[]</field>
         </record>
         <menuitem 
             id="menu_logistic_management_root" 
             parent="stock.menu_stock_root" 
             name="Logistic management"
             sequence="30"
             />
             <menuitem 
                 id="menu_sale_order_line_logistic" 
                 parent="menu_logistic_management_root"
                 action="action_sale_order_line_logistic"
                 sequence="10"
                 />
                                  
             <menuitem 
                 id="menu_stock_move_logistic_form" 
                 parent="menu_logistic_management_root"
                 action="action_stock_move_logistic_form"
                 sequence="40"
                 />
                 
             <menuitem 
                 id="menu_res_company_parameter_configuration"
                 parent="menu_logistic_management_root"
                 name="Configuration"
                 sequence="99"
                 />
                 <menuitem 
                     id="menu_action_res_company_parameter"
                     parent="menu_res_company_parameter_configuration"
                     action="action_res_company_parameter"
                     sequence="10"
                     />
    </data>
</openerp>

