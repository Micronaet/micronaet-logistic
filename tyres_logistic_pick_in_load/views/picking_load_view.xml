<?xml version="1.0"?>
<openerp>
    <data>
        <record model="ir.ui.view" id="view_purchase_order_line_tree">
            <field name="name">purchase.order.line.tree</field>
            <field name="model">purchase.order.line</field>
            <field name="priority" eval="40" />
            <field name="arch" type="xml">
                <tree string="Purchase line" >
                     <field name="order_id" />
                     <field name="product_id" />
                     <field name="name" />
                     <field name="product_qty" />
                     <field name="date_planned" />
                     
                     <!--Total: -->
                     <field name="logistic_delivered_qty" />
                     <field name="logistic_undelivered_qty" />

                     <!--Sale reference:-->
                     <field name="logistic_sale_id" />
                     <field name="load_line_ids" />                     
                </tree>
            </field>
        </record>
        <record model="ir.ui.view" id="view_purchase_order_line_form">
            <field name="name">purchase.order.line.form</field>
            <field name="model">purchase.order.line</field>
            <field name="priority" eval="40" />
            <field name="arch" type="xml">
                <form string="Purchase line">
                    <sheet>
                        <group colspan="4" col="4">
                             <field name="order_id" />
                             <newline/>
                             <field name="product_id" />
                             <field name="name" />
                             
                             <field name="product_qty" />
                             <field name="date_planned" />
                             
                             <!--Total: -->
                             <field name="logistic_delivered_qty" />
                             <field name="logistic_undelivered_qty" />

                             <!--Sale reference:-->
                             <field name="logistic_sale_id" />
                             <separator string="Stock move loads:" colspan="4"/>
                             <field name="load_line_ids" colspan="4" nolabel="1"/>
                        </group>     
                    </sheet>
                </form>
            </field>
        </record>
        <record model="ir.ui.view" id="view_purchase_order_line_delivery_selection_tree">
            <field name="name">purchase.order.line.form</field>
            <field name="model">purchase.order.line</field>
            <field name="priority" eval="40" />
            <field name="arch" type="xml">
                <tree string="Purchase line" default_order="create_date,product_id" editable="bottom" create="false" decoration-success="delivery_id!=False">
                     <field name="order_id" readonly="1"/>
                     <field name="product_id" readonly="1" />
                     <!--<field name="name" readonly="1" />-->
                     <field name="product_qty" readonly="1" />
                     <field name="date_planned" readonly="1" />
                     
                     <!--Total: -->
                     <field name="logistic_delivered_qty" readonly="1" />
                     <field name="logistic_undelivered_qty" readonly="1" />
                     
                     <button name="delivery_0" string="0" type="object" icon="fa-bitbucket"/>
                     <button name="delivery_less_1" string="-" type="object" icon="fa-minus-circle"/>
                     <button name="delivery_more_1" string="+" type="object" icon="fa-plus-circle"/>
                     <button name="delivery_all" string="Remain" type="object" icon="fa-fast-forward"/>
                     
                     <field name="logistic_delivered_manual" />
                     <field name="delivery_id" invisible="1"/>

                     <!--Sale reference:
                     <field name="logistic_sale_id" />
                     <field name="load_line_ids" />-->
                </tree>
            </field>
        </record>
        
        <record model="ir.actions.act_window" id="action_purchase_order_line">
            <field name="name">Purchase line</field>
            <field name="res_model">purchase.order.line</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="view_purchase_order_line_tree"/>
            <field name="context">{'form_view_ref': 'logistic_pick_in_load.view_purchase_order_line_form'}</field>
            <field name="domain">[]</field>
        </record>
        
        <!--stock.picking.delivery-->
        <record model="ir.ui.view" id="view_stock_picking_delivery_tree">
            <field name="name">stock.picking.delivery.tree</field>
            <field name="model">stock.picking.delivery</field>
            <field name="arch" type="xml">
                <tree string="Delivery" decoration-primary="picking_id==False">
                    <field name="create_date" />
                    <field name="create_uid" />
                    <field name="supplier_id" />
                    <field name="carrier_id" />
                    <field name="picking_id" />
                    <!--<field name="purchase_line_ids" />-->
                </tree>
            </field>
        </record>
        <record model="ir.ui.view" id="view_stock_picking_delivery_form">
            <field name="name">stock.picking.delivery.form</field>
            <field name="model">stock.picking.delivery</field>
            <field name="arch" type="xml">
                <form string="Delivery">
                    <header>
                        <button name="confirm_stock_load" string="Load stock" type="object" attrs="{'invisible': [('picking_id','!=',False)]}" class="oe_highlight"/>
                    </header>
                    <sheet>
                        <group colspan="4" col="4"> 
                            <field name="picking_id" attrs="{'invisible': [('picking_id','=',False)]}"/>
                            <button name="open_purchase_line" string="Open line" type="object" class="oe_highlight"/>

                            <field name="supplier_id" />
                            <field name="carrier_id" />
                            
                            <field name="create_date" />
                            <field name="create_uid" />
                            
                            <notebook colspan="4">
                                <page string="Selected purchase line:" attrs="{'invisible': [('picking_id','!=',False)]}">
                                    <group colspan="4" col="4"> 
                                        <separator string="Selected purchase line:" colspan="4"/>
                                        <field name="purchase_line_ids" colspan="4" nolabel="1">
                                            <tree string="Purchase line" editable="bottom" create="false" delete="false">
                                                 <field name="order_id" readonly="1"/>
                                                 <field name="product_id" readonly="1" />
                                                 <!--<field name="name" readonly="1" />-->
                                                 <field name="product_qty" readonly="1" />
                                                 <field name="date_planned" readonly="1" />
                                                 
                                                 <!--Total: -->
                                                 <field name="logistic_delivered_qty" readonly="1" />
                                                 <field name="logistic_undelivered_qty" readonly="1" />
                                                 
                                                 <!--<button name="delivery_0" string="0" type="object" icon="fa-bitbucket"/>
                                                 <button name="delivery_less_1" string="-" type="object" icon="fa-minus-circle"/>
                                                 <button name="delivery_more_1" string="+" type="object" icon="fa-plus-circle"/>
                                                 <button name="delivery_all" string="Remain" type="object" icon="fa-fast-forward"/>-->
                                                 
                                                 <field name="logistic_delivered_manual" readonly="1"/>

                                                 <!--Sale reference:
                                                 <field name="logistic_sale_id" />
                                                 <field name="load_line_ids" />-->
                                            </tree>
                                        </field>
                                    </group>    
                                </page>
                                <page string="Stock movement:" attrs="{'invisible': [('picking_id','=',False)]}">
                                    <group colspan="4" col="4"> 
                                        <separator string="Stock movement:" colspan="4"/>
                                        <field name="move_ids" colspan="4" nolabel="1">
                                        </field>
                                    </group>    
                                </page>
                            </notebook> 

                        </group>    
                    </sheet>
                </form>
            </field>
        </record>
        <record model="ir.actions.act_window" id="action_stock_picking_delivery_tree">
            <field name="name">Delivery received</field>
            <field name="res_model">stock.picking.delivery</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="view_stock_picking_delivery_tree"/>
            <field name="context">{}</field>
            <field name="domain">[]</field>
        </record>
        <record model="ir.actions.act_window" id="action_stock_picking_delivery_form">
            <field name="name">New Delivery</field>
            <field name="res_model">stock.picking.delivery</field>
            <field name="view_type">form</field>
            <field name="view_mode">form,tree</field>
            <field name="view_id" ref="view_stock_picking_delivery_form"/>
            <field name="context">{}</field>
            <field name="domain">[]</field>
        </record>
        
        <menuitem 
             id="menu_purchase_order_line" 
             parent="tyres_logistic_management.menu_logistic_management_root"
             action="action_purchase_order_line"
             sequence="30"
             />

        <menuitem
             id="menu_logistic_delivery_management_root" 
             parent="tyres_logistic_management.menu_logistic_header_root"
             name="Manage supplier delivery"
             sequence="29"
             />
             <menuitem 
                 parent="menu_logistic_delivery_management_root" 
                 id="menu_stock_picking_delivery_form" 
                 action="action_stock_picking_delivery_form"
                 sequence="10"
                 />
             <menuitem 
                 parent="menu_logistic_delivery_management_root" 
                 id="menu_stock_picking_delivery_tree" 
                 action="action_stock_picking_delivery_tree"
                 sequence="20"
                 />
             
             
             
    </data>
</openerp>
